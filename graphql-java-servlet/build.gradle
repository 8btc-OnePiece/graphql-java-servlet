buildscript {
    repositories {
        jcenter()
        mavenCentral()
    }
    dependencies {
        classpath 'biz.aQute.bnd:biz.aQute.bnd.gradle:3.1.0'
    }
}

apply plugin: 'groovy'
apply plugin: 'osgi'
apply plugin: 'java-library-distribution'
apply plugin: 'biz.aQute.bnd.builder'

jar {
    manifest {
        instruction 'Require-Capability', 'osgi.extender'
    }
}

//afterReleaseBuild.dependsOn bintrayUpload

dependencies {
    compile(project(':graphql-java-kickstart'))

//    compile 'org.slf4j:slf4j-api:1.7.21'

    // Useful utilities
    compile 'com.google.guava:guava:24.1.1-jre'

    // Servlet
    compile 'javax.servlet:javax.servlet-api:3.1.0'
    compile 'javax.websocket:javax.websocket-api:1.1'

    // OSGi
    compileOnly 'org.osgi:org.osgi.core:6.0.0'
    compileOnly 'org.osgi:org.osgi.service.cm:1.5.0'
    compileOnly 'org.osgi:org.osgi.service.component:1.3.0'
    compileOnly 'biz.aQute.bnd:biz.aQute.bndlib:3.1.0'

    testCompile 'io.github.graphql-java:graphql-java-annotations:5.2'

    // Unit testing
    testCompile "org.codehaus.groovy:groovy-all:2.4.1"
    testCompile "org.spockframework:spock-core:1.1-groovy-2.4-rc-3"
    testRuntime "cglib:cglib-nodep:3.2.4"
    testRuntime "org.objenesis:objenesis:2.5.1"
    testCompile 'org.slf4j:slf4j-simple:1.7.24'
    testCompile 'org.springframework:spring-test:4.3.7.RELEASE'
    testRuntime 'org.springframework:spring-web:4.3.7.RELEASE'
}
